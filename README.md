# Xson

Xson \u662f\u4e00\u4e2a\u57fa\u4e8e Rust \u5b9e\u73b0\u7684 JSON \u5e8f\u5217\u5316\u5e93\u793a\u4f8b\uff0c\u4f7f\u7528 JNI \u4e0e Java \u4ea4\u4e92\u3002

\u8fd9\u4e2a\u9879\u76ee\u5c55\u793a\u5982\u4f55\u901a\u8fc7 Maven \u521b\u5efa\u5e03\u7f57\u5f0f\u4ee3\u7801\uff0c\u5e76\u5728\u7cfb\u7edf\u73af\u5883\u624b\u52a8\u7f16\u8bd1 Rust \u52a8\u6001\u5e93\u3002

## \u7f16\u8bd1

1. \u786c\u4ef6\u5b89\u88c5 Rust \u5de5\u5177\u94fe\uff08\u5b9e\u73b0\u73af\u5883\u9700\u8981\u81ea\u884c\u7f16\u8bd1\uff09
2. `mvn package` \u5c06\u8c03\u7528 `cargo build --release` \u7f16\u8bd1 Rust \u9879\u76ee
3. \u7f16\u8bd1\u5b8c\u6210\u540e\uff0c`libxson.so` \u4f1a\u88ab\u62f7\u8d1d\u5230 jar \u5185\u90e8

> \u7531\u4e8e\u5f53\u524d\u73af\u5883\u65e0\u6cd5\u4ece crates.io \u4e0b\u8f7d\u4f9d\u8d56\uff0c\u8bf7\u786e\u4fdd\u81ea\u5df1\u7684\u7f16\u8bd1\u73af\u5883\u53ef\u4ee5\u8bbf\u95ee\u7f51\u7edc\u3002

## \u4f7f\u7528

```xml
<dependency>
    <groupId>com.example</groupId>
    <artifactId>xson</artifactId>
    <version>0.1.0</version>
</dependency>
```

Java \u7a0b\u5e8f\u4f8b\u5b50:

```java
String json = "{\"foo\":1}";
String pretty = com.example.xson.Xson.toJson(json);
System.out.println(pretty);
```

## \u6027\u80fd\u5386\u7a0b

\u6267\u884c `PerfTest` \u53ef\u4ee5\u7b80\u5355\u6d4b\u8bd5 JNI \u8c03\u7528\u7684\u6027\u80fd\u3002

```bash
mvn -f java/pom.xml package
java -cp java/target/classes com.example.xson.PerfTest
```

\u8bf7\u6ce8\u610f\uff1a\u5982\u679c Maven \u6216 Rust \u56e0\u7f51\u7edc\u539f\u56e0\u65e0\u6cd5\u81ea\u52a8\u4e0b\u8f7d\u4f9d\u8d56\uff0c\u9700\u4f60\u81ea\u884c\u914d\u7f6e\u73af\u5883\u3002
